<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Support Tickets - BurnLab</title>

<style>
:root {
  --burn-dark: #1a2a46;
  --burn-mid: #23395d;
  --burn-accent: #007bff;
  --burn-light: #9ec5ff;
  --burn-bg: #f5f8fc;
}

body {
  background: var(--burn-bg);
  color: #2b2b2b;
  font-family: "Source Sans Pro", sans-serif;
  margin: 0;
}

/* ----- HEADER ----- */
header {
  background: var(--burn-mid);
  color: #fff;
  text-align: center;
  padding: 1.5rem 0;
  letter-spacing: 0.5px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

/* ----- NAVBAR ----- */
nav {
  background: var(--burn-dark);
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  padding: 0.8rem;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

nav a {
  color: var(--burn-light);
  text-decoration: none;
  font-weight: 600;
  font-size: 1rem;
}

nav a:hover { color: #fff; }

/* ----- PAGE CONTAINER ----- */
.container {
  width: 85%;
  max-width: 900px;
  margin: 40px auto;
}

/* ----- TABLE ----- */
.ticket-table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 10px;
  overflow: hidden;
  margin-top: 25px;
}

.ticket-table th {
  background: var(--burn-mid);
  color: white;
  padding: 12px;
}

.ticket-table td {
  padding: 12px;
  text-align: center;
  border-bottom: 1px solid #eee;
}
.ticket-table tr:hover { background: #eef4ff; }

/* ----- STATUS BADGES ----- */
.status-tag {
  padding: 5px 10px;
  border-radius: 6px;
  font-weight: bold;
  font-size: 0.85rem;
}

.status-open { background:#c8e6c9; color:#2e7d32;}
.status-pending-admin { background:#fff3cd; color:#856404;}
.status-pending-user { background:#bbdefb; color:#1565c0;}
.status-closed { background:#ffcdd2; color:#b71c1c;}

/* ----- FORM ----- */
form {
  background: #fff;
  padding: 20px;
  margin-top: 40px;
  border-radius: 10px;
  border: 1px solid #ddd;
}

input, textarea {
  width: 100%;
  padding: 12px;
  border-radius: 6px;
  border: 1px solid #ccc;
  margin-bottom: 12px;
  resize: none;             /* prevent drag resize */
  -webkit-user-drag: none;  /* disable drag */
}

/* ----- BUTTONS ----- */
.submit-btn {
  background: var(--burn-accent);
  color: white;
  padding: 10px 18px;
  border:none;
  border-radius: 6px;
  cursor: pointer;
  font-weight:600;
}
.submit-btn:hover { background:#005fcc; }

.view-link {
  background: var(--burn-accent);
  color:white;
  padding:6px 12px;
  border-radius:6px;
  text-decoration:none;
  font-weight:600;
}
.view-link:hover { background:#0056b3; }
</style>

</head>

<body>

<header>
  <h1>BurnLab Support</h1>
</header>

<nav>
    {% if role == "Seller" %}
        <a href="/productPage">Home</a>
    {% else %}
        <a href="/buyerHome">Home</a>
    {% endif %}
    <a href="/logout">Logout</a>
</nav>

<div class="container">

<h2>Your Support Tickets</h2>

<table class="ticket-table">
<tr>
  <th>ID</th>
  <th>Subject</th>
  <th>Status</th>
  <th>View</th>
</tr>

{% for t in tickets %}
<tr>
  <td>{{ t.id }}</td>
  <td>{{ t.subject }}</td>
  <td>
      <span class="status-tag
        {% if t.status == 'Open' %}status-open
        {% elif t.status == 'Pending Admin' %}status-pending-admin
        {% elif t.status == 'Pending User' %}status-pending-user
        {% elif t.status == 'Closed' %}status-closed
        {% endif %}
      ">{{ t.status }}</span>
  </td>
  <td><a class="view-link" href="/replyTicket/{{ t.id }}/">Open</a></td>
</tr>
{% empty %}
<tr><td colspan="4"><i>No tickets yet.</i></td></tr>
{% endfor %}
</table>

<h2>Create New Ticket</h2>

<form method="POST" action="/newTicket/">
  {% csrf_token %}

  <input type="hidden" name="role" value="{{ role }}">

  <label>Subject:</label>
  <input type="text" name="subject" required>

  <label>Message:</label>
  <textarea name="message" rows="4" required></textarea>

  <button type="submit" class="submit-btn">Submit Ticket</button>
</form>

</div>
</body>
</html>
