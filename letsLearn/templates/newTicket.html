<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BurnLab â€“ Support Tickets</title>

<style>
:root {
  --burn-dark: #1a2a46;
  --burn-mid: #23395d;
  --burn-accent: #007bff;
  --burn-light: #9ec5ff;
  --burn-bg: #f5f8fc;
}

body {
  background: var(--burn-bg);
  font-family: "Segoe UI", sans-serif;
  margin: 0;
}

/* Header */
header {
  background: var(--burn-mid);
  color: white;
  text-align: center;
  padding: 1.2rem;
  font-size: 1.6rem;
  font-weight: bold;
}

/* Navbar */
nav {
  background: var(--burn-dark);
  padding: 12px;
  text-align: center;
}
nav a {
  color: var(--burn-light);
  margin: 0 20px;
  text-decoration: none;
  font-weight: 600;
}
nav a:hover { color: white; }

/* Layout */
.container {
  width: 85%;
  max-width: 900px;
  margin: 30px auto;
}

/* Ticket table */
table {
  width: 100%;
  background: white;
  border-collapse: collapse;
  margin-bottom: 30px;
  border-radius: 10px;
  overflow: hidden;
}
th {
  background: var(--burn-mid);
  color: white;
  padding: 12px;
}
td {
  text-align: center;
  padding: 12px;
  border-bottom: 1px solid #e4e4e4;
}
tr:hover { background: #eef4ff; }

/* Status Tags */
.status-tag {
  padding: 6px 10px;
  border-radius: 5px;
  font-weight: bold;
  font-size: .85rem;
}
.status-open { background:#c8e6c9; color:#2e7d32; }
.status-pending-admin { background:#fff3cd; color:#856404; }
.status-pending-user { background:#bbdefb; color:#1565c0; }
.status-closed { background:#ffcdd2; color:#b71c1c; }

/* Form Box */
form {
  background: white;
  padding: 20px;
  border-radius: 8px;
  border: 1px solid #ddd;
}
input, textarea {
  width: 100%;
  padding: 12px;
  border-radius: 6px;
  border: 1px solid #ccc;
  margin-bottom: 12px;
}
textarea { height: 120px; resize: none; }

/* Buttons */
button {
  background: var(--burn-accent);
  color: white;
  padding: 10px 18px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}
button:hover { background:#005fcc; }

.view-btn {
  background: var(--burn-accent);
  padding: 6px 10px;
  text-decoration: none;
  border-radius: 6px;
  color: white;
  font-weight: bold;
}
.view-btn:hover { background:#0056b3; }
</style>

</head>

<body>

<header>BurnLab Support</header>

<nav>
  {% if role == "Seller" %}
    <a href="/productPage">Home</a>
  {% else %}
    <a href="/buyerHome">Home</a>
  {% endif %}
  <a href="/logout">Logout</a>
</nav>

<div class="container">

<h2>Your Tickets</h2>
<table>
<tr>
  <th>ID</th>
  <th>Subject</th>
  <th>Status</th>
  <th>View</th>
</tr>

{% for t in tickets %}
<tr>
  <td>{{ t.id }}</td>
  <td>{{ t.subject }}</td>
  <td>
      <span class="status-tag
        {% if t.status == 'Open' %}status-open
        {% elif t.status == 'Pending Admin' %}status-pending-admin
        {% elif t.status == 'Pending User' %}status-pending-user
        {% elif t.status == 'Closed' %}status-closed
        {% endif %}
      ">
      {{ t.status }}
      </span>
  </td>
  <td><a class="view-btn" href="/replyTicket/{{ t.id }}/">Open</a></td>
</tr>
{% empty %}
<tr><td colspan="4"><i>No tickets yet.</i></td></tr>
{% endfor %}
</table>


<h2>Create a Support Ticket</h2>
<form method="POST" action="/newTicket/">
  {% csrf_token %}

  <label>Subject</label>
  <input type="text" name="subject" placeholder="Enter ticket subject..." required>

  <label>Message</label>
  <textarea name="message" placeholder="Describe the issue..." required></textarea>

  <button type="submit">Submit Ticket</button>
</form>

</div>
</body>
</html>
